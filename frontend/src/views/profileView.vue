<template>
    <div>
  <div class="container-fluid">
   
    <div class="container">
        <div class="row" v-for="user in User" :key="user.userID">
          <center>
            <img :src="user.userPic" :alt="user.FirstName">
          </center>
          <div class="col ">
            <p>{{ user.userID }}</p>
            <p>Name: {{ user.FirstName }}</p>
            <p>Surname:{{ user.LastName }}</p>
            <p>Age :{{ user.age }}</p>
            <p>Gender:{{ user.gender }}</p>
            <p>Description:{{ user.Description }}</p> 
          </div>
          <div class="col">
            <p>Country:</p>
            <p>City:</p>
            <p>Email:{{ user.emailAdd }}</p> 
            <p>Phone: {{ user.phone}} </p>
            <p>Linkedin:{{ user.linkedinUrl }}</p>
            <p>instaUrl:{{ user.instaUrl }}</p>
            <p>facebookUrl:{{ user.facebookUrl }}</p>
            <h3></h3>
          </div>
         
        </div>
        <div class="col-12 text-center">
          <button class="btn"><i class="bi bi-pen-fill"></i>edit details</button>
          <router-link to="/portfolio"><button class="btn"><i class="bi bi-person-plus-fill"></i>Create portfolio</button></router-link>
        </div>
    </div>
  </div>
  <br>
  <div class="heading">
    <h1>My portfolios</h1>
  </div>
  <div class="content" v-if="Portfolios">
         
    <div class="row" v-for="portfolio in  matchuserID" :key="portfolio.portfolioID">         
            <button class="thebtn">             
                <div class="col-9">
                    <h4>{{ portfolio.accountName }}</h4>
                    <p><i class="bi bi-phone"></i> {{ portfolio.phone }}</p>
                    <p><i class="bi bi-bookshelf"></i> {{ portfolio.subject }}</p>
                    <p><i class="bi bi-globe-europe-africa"></i> {{ portfolio.country }}</p>
                    <p><i style="color:green" class="bi bi-cash-coin"></i> R {{ portfolio.price }}</p>                
                </div>
                <div class="col-3">               
                   <img :src="portfolio.portfolioiImageUrl" :alt="portfolio.portfolioiImageUrl">
                </div>
                <div class="button_holder">
                  <div class="col-12">
                    <button class="btn" @click="deletePortfolio(portfolio.portfolioID)"><i class="bi bi-trash3-fill"></i>Delete</button> 
                    <router-link :to="{ name: 'Singlepro', params: { id: portfolio.portfolioID }, query: {
                      portfolioiImageUrl: portfolio.portfolioiImageUrl,
                      accountName: portfolio.accountName,
                      subject: portfolio.subject,
                      Description: portfolio.Description,
                      experience:portfolio.experience,
                      price:portfolio.price,
                      emailAdd:portfolio.emailAdd,
                      country: portfolio.country,
                      city:portfolio.city,
                      phone:portfolio.phone,
                      linkedinUrl:portfolio.linkedinUrl,
                      instaUrl:portfolio.instaUrl,
                      facebookUrl:portfolio.facebookUrl
                    }}"
                > 
                    <button class="btn"><i class="bi bi-three-dots-vertical"></i>View more</button>
                     </router-link>
                  </div>
                </div>
            </button>
      
    </div>
</div>
<div class="spin" v-else >
    <center>
        <Spinner/>
    </center>
  </div>
</div>

 
</template>
<script>
import Spinner from '@/components/spinnerComp.vue';
import { useCookies } from "vue3-cookies";
const { cookies } = useCookies();

    export default {
        components: {
    Spinner
  },
        computed:{
            User() {
      return this.$store.state.user;
    },
    //calling portfolio info
    Portfolios() {
        return this.$store.state.Portfolios;
      },
      //calling info that matches the users cookie id
      matchuserID() { 
      const cookieValue = cookies.get("human"); //getting values values from cookie named human
      const { result } = cookieValue; 
      const userId = result.userID;

      return this.Portfolios.filter(portfolio => portfolio.userID == userId);
    }
        },
        methods:{
          deletePortfolio(portfolioID) {
//delete the user by userId
  this.$store.dispatch('deletePortfolio', portfolioID)
},
        },
        mounted() {
    this.$store.dispatch('fetchUser');
    this.$store.dispatch('fetchPortfolios');
  }
    }
</script>

<style  scoped>
.container-fluid{
background-color: #d5d5d5;
border: 1px solid #d5d5d5;
border-radius: 10px;
width: 90%;
}
.col{

    width: auto;
}
.col img{
    width: 200px;
}


  .search-container{
     width: 90%;
     margin:2% 5%;
  }
  .row{
   
     font-weight: 700;
     margin: 10px;
     width:95%;
  }
  
  h4{
     font-weight: 900;
     color: #12021E;
  }
  a{
     text-decoration: none;
     color:black
  }
  .col-9{
     float: left;
     text-align: left;
  }
  .col-3{
     float: right;
     margin-top: 5%;
  }
  .col-3 img{
     width: 70px;
     height: 70px;
     object-fit: contain;
     aspect-ratio: 3/4;
  } 
  .thebtn{
     background-color: #d5d5d5;
     border: 1px solid #d5d5d5;
     border-radius: 10px;
     width: 400px;
  }
  
  .content{
     display: grid;
     grid-template-columns:auto auto;
     justify-content: center;
  }

.btn{
  margin: 2px;
  color: #d5d5d5;
  background-color: #12021E;
}

.btn:hover{
  animation: tada; /* referring directly to the animation's @keyframe declaration */
  animation-duration: 2s; /* don't forget to set a duration! */
  color: #12021E;
  background-color:#d5d5d5;
}
.btn i{
  color: #d5d5d5;
}
.btn i:hover{
  color: #12021E;
  background-color:#d5d5d5;  
}
.heading{
color:#d5d5d5;
font-weight:900;
  padding:10px;
  text-align:center;
}
  @media (width < 700px) {
     .content{
     grid-template-columns:auto;
  }
  .thebtn{
    width: 90%;
 }
 .row{
  width:100%;
 }
  }
</style>